import random

print('指スマしましょう')
#自分とコンピューターの手持ちポイント
player_num = 2
computer_num = 2

player_name = input('名前を入力してください：')
if player_name == '':
    player_name = 'ゲスト'
else:
    player_name = player_name

print('まずは順番決めじゃんけんです')

def finger_info(finger,name):
    global fingers
    fingers = [0,1,2]
    print(name + 'は  <' + str(fingers[finger]) + '>  本出しました')
    
def suma_info(suma):
    global sumas
    sumas = [0,1,2,3,4]
    print(' \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ')
    print(' \　指スマ！　' + str(sumas[suma]) + '　!!!!!  \ ')
    print(' \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ')

def print_namehand(hand,name):
    global hands
    hands = ['グー','チョキ','パー']
    print(name + 'は  <' + hands[hand] + '>  を出しました')

def janken():    
    print('何を出しますか？(0:グー1:チョキ2:パー)')
    global player_hand
    player_hand = int(input('数字で入力してください：'))
    global computer_hand
    computer_hand = random.randint(0,2)
    while player_hand < 0 or player_hand > 2: #←ここに'player_hand==空白'の条件を加えたい
        player_hand = int(input('0-2の数字を入力してください：'))
    print_namehand(player_hand,player_name)
    print_namehand(computer_hand,'コンピューター')   
    
def player_side():
    print('あなたの番です')
    global player_num
    global computer_num
    if player_num == 2 and computer_num == 2:
        global player_finger
        player_finger = int(input('出す指の本数を0-2で教えてください：'))
        while player_finger < 0 or player_finger > 2:
            player_finger = int(input('0-2の数字を入力してください：'))
        global player_suma
        player_suma = int(input('指スマ？？(0-4)：'))
        while player_suma < 0 or player_suma > 4:
            player_suma = int(input('0-4の数字を入力してください：'))
        global computer_finger
        computer_finger = random.randint(0,2)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(player_suma)
        finger_info(player_finger,player_name)
        finger_info(computer_finger,'コンピューター')
        if player_finger + computer_finger == player_suma:
            print(' ^^^^^^^^^^^^^^^ ')
            print('<　やったね！！　>')
            print(' ^^^^^^^^^^^^^^^ ')
            player_num -= 1
            computer_side()
        else:
            print(' ............ ')
            print(':　残念。。　:')
            print(' ............ ')
            computer_side()
    
    if player_num == 2 and computer_num == 1:
        player_finger = int(input('出す指の本数を0-2で教えてください：'))
        while player_finger < 0 or player_finger > 2:
            player_finger = int(input('0-2の数字を入力してください：'))
        player_suma = int(input('指スマ？？(0-3)：'))
        while player_suma < 0 or player_suma > 3:
            player_suma = int(input('0-3の数字を入力してください：'))
        computer_finger = random.randint(0,1)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(player_suma)
        finger_info(player_finger,player_name)
        finger_info(computer_finger,'コンピューター')
        if player_finger + computer_finger == player_suma:
            print(' ^^^^^^^^^^^^^^^ ')
            print('<　やったね！！　>')
            print(' ^^^^^^^^^^^^^^^ ')
            player_num -= 1
            computer_side()
        else:
            print(' ............ ')
            print(':　残念。。　:')
            print(' ............ ')
            computer_side()
    
    elif player_num == 1 and computer_num == 2:
        player_finger = int(input('出す指の本数を0-1で教えてください：'))
        while player_finger < 0 or player_finger > 1:
            player_finger = int(input('0-1の数字を入力してください：'))
        player_suma = int(input('指スマ？？(0-3)：'))
        while player_suma < 0 or player_suma > 3:
            player_suma = int(input('0-3の数字を入力してください：'))
        computer_finger = random.randint(0,2)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(player_suma)
        finger_info(player_finger,player_name)
        finger_info(computer_finger,'コンピューター')
        if player_finger + computer_finger == player_suma:
            print(' ^^^^^^^^^^^^^^^ ')
            print('<　やったね！！　>')
            print(' ^^^^^^^^^^^^^^^ ')
            player_num -= 1
            if player_num == 0:
                print('++++++++++++++++++++++++++++++++++++++++++++++++')
                print('+　おめでとうございます、あなたの勝ちです！！　+')
                print('++++++++++++++++++++++++++++++++++++++++++++++++')
                print('Thank You !!!')
            else:
                computer_side()
        else:
            print(' ............ ')
            print(':　残念。。　:')
            print(' ............ ')
            computer_side()
    
    elif player_num == 1 and computer_num == 1:
        player_finger = int(input('出す指の本数を0-1で教えてください：'))
        while player_finger < 0 or player_finger > 1:
            player_finger = int(input('0-1の数字を入力してください：'))
        player_suma = int(input('指スマ？？(0-2)：'))
        while player_suma < 0 or player_suma > 2:
            player_suma = int(input('0-2の数字を入力してください：'))
        computer_finger = random.randint(0,1)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(player_suma)
        finger_info(player_finger,player_name)
        finger_info(computer_finger,'コンピューター')
        if player_finger + computer_finger == player_suma:
            print(' ^^^^^^^^^^^^^^^ ')
            print('<　やったね！！　>')
            print(' ^^^^^^^^^^^^^^^ ')
            player_num -= 1
            if player_num == 0:
                print('++++++++++++++++++++++++++++++++++++++++++++++++')
                print('+　おめでとうございます、あなたの勝ちです！！　+')
                print('++++++++++++++++++++++++++++++++++++++++++++++++')
                print('Thank You !!!')
            else:
                computer_side()
        else:
            print(' ............ ')
            print(':　残念。。　:')
            print(' ............ ')
            computer_side()
    
def computer_side():
    print('コンピューターの番です')
    global computer_num
    global player_num
    if computer_num == 2 and player_num == 2:
        global player_finger
        player_finger = int(input('出す指の本数を0-2で教えてください：'))
        while player_finger < 0 or player_finger > 2:
            player_finger = int(input('0-2の数字を入力してください：'))
        global computer_finger
        computer_finger = random.randint(0,2)
        global computer_suma
        if computer_finger == 0:
            computer_suma = random.randint(0,2)
        elif computer_finger == 1:
            computer_suma = random.randint(0,3)
        elif computer_finger == 2:
            computer_suma = random.randint(0,4)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(computer_suma)
        finger_info(computer_finger,'コンピューター')
        finger_info(player_finger,player_name)
        if player_finger + computer_finger == computer_suma:
            print('----------------')
            print(':　くっそー！　:')
            print('----------------')
            computer_num -= 1
            player_side()
        else:
            print('-----------------')
            print(':　危なかった！　:')
            print('-----------------')
            player_side()
            
    elif computer_num == 2 and player_num == 1:
        player_finger = int(input('出す指の本数を0-1で教えてください：'))
        while player_finger < 0 or player_finger > 1:
            player_finger = int(input('0-1の数字を入力してください：'))
        computer_finger = random.randint(0,2)
        if computer_finger == 0:
            computer_suma = random.randint(0,1)
        elif computer_finger == 1:
            computer_suma = random.randint(0,2)
        elif computer_finger == 2:
            computer_suma = random.randint(0,3)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(computer_suma)
        finger_info(computer_finger,'コンピューター')
        finger_info(player_finger,player_name)
        if player_finger + computer_finger == computer_suma:
            print('----------------')
            print(':　くっそー！　:')
            print('----------------')
            computer_num -= 1
            player_side()
        else:
            print('-----------------')
            print(':　危なかった！　:')
            print('-----------------')
            player_side()
    
    elif computer_num == 1 and player_num == 2:
        player_finger = int(input('出す指の本数を0-2で教えてください：'))
        while player_finger < 0 or player_finger > 2:
            player_finger = int(input('0-2の数字を入力してください：'))
        computer_finger = random.randint(0,1)
        if computer_finger == 0:
            computer_suma = random.randint(0,2)
        elif computer_finger == 1:
            computer_suma = random.randint(0,3)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(computer_suma)
        finger_info(computer_finger,'コンピューター')
        finger_info(player_finger,player_name)
        if player_finger + computer_finger == computer_suma:
            print('----------------')
            print(':　くっそー！　:')
            print('----------------')
            computer_num -= 1
            if computer_num == 0:
                print('++++++++++++++++++++++++++++')
                print('+　残念、あなたの負けです　+')
                print('++++++++++++++++++++++++++++')
                print('Thank You !!!')
            else:
                player_side()
        else:
            print('-----------------')
            print(':　危なかった！　:')
            print('-----------------')
            player_side()
    
    elif computer_num == 1 and player_num == 1:
        player_finger = int(input('出す指の本数を0-1で教えてください：'))
        while player_finger < 0 or player_finger > 1:
            player_finger = int(input('0-1の数字を入力してください：'))
        computer_finger = random.randint(0,1)
        if computer_finger == 0:
            computer_suma = random.randint(0,1)
        elif computer_finger == 1:
            computer_suma = random.randint(0,2)
        print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
        suma_info(computer_suma)
        finger_info(computer_finger,'コンピューター')
        finger_info(player_finger,player_name)
        if player_finger + computer_finger == computer_suma:
            print('----------------')
            print(':　くっそー！　:')
            print('----------------')
            computer_num -= 1
            if computer_num == 0:
                print('++++++++++++++++++++++++++++')
                print('+　残念、あなたの負けです　+')
                print('++++++++++++++++++++++++++++')
                print('Thank You !!!')
            else:
                player_side()
        else:
            print('-----------------')
            print(':　危なかった！　:')
            print('-----------------')
            player_side()
    
janken()
while player_hand == computer_hand:
    print(' ============================ ')
    print('l　あいこです、もう一回！！　l')
    print(' ============================ ')
    print('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')
    janken()

if (player_hand == 0 and computer_hand == 1) or (player_hand == 1 and computer_hand == 2) or (player_hand == 2 and computer_hand == 0):
    print(' ====================')
    print('l　あなたの勝ちです　l')
    print(' ====================')
    player_side()
    
else:
    print(' ============================ ')
    print('l　コンピューターの勝ちです　l')
    print(' ============================ ')
    computer_side()
    
#randaom -> random 修正済み
